name: Expression & Contexts
on:
    push:
        branches: [main]
    pull_request:
        types: [opened]
    issues:
        types: [opened]
run-name: "Expressions and Contexts by @${{github.actor}}, event: ${{github.event_name}}"

jobs:
    runs-on-issues-and-prs:
        runs-on: ubnutu-latest
        if: github.event_name == 'issues' || github.event_name == 'pull_request'
        steps:
            - name: Run only if issue has a bug label
              if: contains(github.event.issue.labels.*.name, 'bug')
              run: echo ${{join(github.event.issue.labels.*.name, ', ')}}
    using-expressions-and-events:
        runs-on: ubuntu-latest
        if: github.event_name == 'issues'
        steps:
            - name: Expression
              id: expressions
              run: |
                  echo ${{1}}
                  echo ${{'This is a string'}}
                  echo ${{true}}
                  echo ${{false}}
                  echo ${{null}}
                  echo ${{1>2}}
                  echo ${{'string' == 'String'}}
                  echo ${{1 && 0}}
                  echo ${{true || (false && true)}}
            - name: Dump Contexts
              run: |
                  echo '${{ toJson(github) }}'
                  echo '${{ toJson(job) }}'
                  echo '${{ toJson(steps) }}'
                  echo '${{ toJson(runner) }}'
                  echo '${{ toJson(secrets) }}'
